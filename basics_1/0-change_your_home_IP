#!/usr/bin/env bash
# a Bash script that configures an Ubuntu server 
#!/bin/bash

# Backup the current /etc/hosts file
sudo cp /etc/hosts /etc/hosts.backup

# Update localhost to resolve to 127.0.0.2
sudo sed -i '/127.0.0.1\s\+localhost/ s/127.0.0.1/127.0.0.2/' /etc/hosts

# Add entry to resolve facebook.com to 8.8.8.8
if ! grep -q "8.8.8.8 facebook.com" /etc/hosts; then
  echo "8.8.8.8 facebook.com" | sudo tee -a /etc/hosts > /dev/null
fi

echo "Changes applied. You can now ping localhost and facebook.com with the new IPs."

# Display the new contents of /etc/hosts
cat /etc/hosts
